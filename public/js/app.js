webpackJsonp([11],{116:function(e,t,n){function r(e){var t=a[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var a={"./BarberSchedule.vue":[127,9],"./Barbers.vue":[128,8],"./ClientSchedule.vue":[129,7],"./Config.vue":[130,6],"./Error404.vue":[131,2],"./Home.vue":[132,5],"./Index.vue":[133,1],"./Login.vue":[134,0],"./Profile.vue":[135,4],"./Register.vue":[136,3]};r.keys=function(){return Object.keys(a)},r.id=116,e.exports=r},119:function(e,t){},121:function(e,t){},122:function(e,t,n){"use strict";function r(e){n(123)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(49),u=n(124),c=n(50),o=r,i=c(a.a,u.a,!1,o,null,null);t.default=i.exports},123:function(e,t){},124:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},a=[],u={render:r,staticRenderFns:a};t.a=u},43:function(e,t,n){"use strict";var r=n(28),a=n.n(r),u=n(15),c=n(95),o=n(96);u.a.use(c.a);var i=new c.a.Store({state:{appInitialized:!1,isAuthenticated:!1,user:{username:"",firstname:"",lastname:"",email:"",token:"",role:""}},getters:{currentUser:function(e){return e.user}},mutations:{setCurrentUser:function(e,t){e.user=t}},actions:{validateToken:function(e){return new a.a(function(t,n){o.a.head("/access/validatetoken").then(function(n){e.state.isAuthenticated=!0,t(!0)}).catch(function(t){e.state.isAuthenticated=!1,n(t)})})},retrieveUserInformation:function(e){return new a.a(function(t,n){o.a.get("/access/userinfo").then(function(n){e.commit("setCurrentUser",n.data),t()}).catch(function(e){n(e)})})},login:function(e,t){return new a.a(function(n,r){o.a.post("/access/login",t).then(function(t){e.dispatch("retrieveUserInformation"),e.state.isAuthenticated=!0,n()}).catch(function(e){r(e)})})}}});t.a=i},49:function(e,t,n){"use strict";t.a={}},52:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),a=n(51),u=n(57),c=n(43),o=n(117),i=(n.n(o),n(120));n.n(i);n(53),Object(o.sync)(c.a,u.a),r.a.config.productionTip=!1,r.a.use(a.l),n(118),a.l.start(function(){new r.a({el:"#q-app",router:u.a,store:c.a,render:function(e){return e(n(122).default)}})})},53:function(e,t){},57:function(e,t,n){"use strict";function r(e){return function(){return n(116)("./"+e+".vue")}}var a=n(26),u=n.n(a),c=n(27),o=n.n(c),i=n(15),s=n(94),f=n(43),p=this;i.a.use(s.a);var l=new s.a({mode:"hash",scrollBehavior:function(){return{y:0}},routes:[{path:"/",component:r("Index"),meta:{requiresAuth:!0},children:[{path:"",component:r("Home")},{path:"client/schedule",component:r("ClientSchedule")},{path:"barber/schedule",component:r("BarberSchedule")},{path:"barbers",component:r("Barbers")},{path:"config",component:r("Config")},{path:"profile",component:r("Profile")}]},{path:"/login",component:r("Login")},{path:"/register",component:r("Register")},{path:"*",component:r("Error404")}]});t.a=l,l.beforeEach(function(){var e=o()(u.a.mark(function e(t,n,r){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.matched.some(function(e){return e.meta.requiresAuth})){e.next=13;break}return e.prev=1,e.next=4,f.a.dispatch("validateToken");case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",r({path:"/login",query:{redirect:t.fullPath}}));case 10:if(f.a.state.user.username){e.next=13;break}return e.next=13,f.a.dispatch("retrieveUserInformation");case 13:r();case 14:case"end":return e.stop()}},e,p,[[1,6]])}));return function(t,n,r){return e.apply(this,arguments)}}())},96:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(26),a=n.n(r),u=n(27),c=n.n(u),o=n(97),i=n.n(o),s=this,f=i.a.create({baseURL:"http://localhost:3000/",withCredentials:!0});(function(){var e=c()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.head("access/validatetoken");case 3:return e.abrupt("return",!0);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,s,[[0,6]])}))})(),function(){var e=c()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get("access/userinfo");case 3:return t=e.sent,console.log(t.data),e.abrupt("return",t.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,s,[[0,8]])}))}()}},[52]);